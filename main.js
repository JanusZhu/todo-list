(()=>{"use strict";class e{constructor(e){this.name=e,this.tasks=[]}getName(){return this.name}setName(e){this.name=e}addTask(e){this.tasks.push(e)}setTasks(e){this.tasks=e}getTask(e){return this.tasks.find((t=>t.getName()===e))}getTasks(){return this.tasks}clearTask(){this.task=[]}contains(e){return this.tasks.some((t=>t.getName()===e))}deleteTask(e){this.tasks=this.tasks.filter((t=>t.getName()!==e))}}class t{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This week"))}setProjects(e){this.projects=e}getProjects(){return this.projects}getProject(e){return this.projects.find((t=>t.getName()===e))}contains(e){return this.projects.some((t=>t.getName()===e))}addProject(e){this.projects.find((t=>t.getName()===e.getName()))||this.projects.push(e)}deleteProject(e){const t=this.projects.find((t=>t.getName()===e));this.projects.splice(this.projects.indexOf(t),1)}}class s{constructor(e,t=1,s="No Date"){this.name=e,this.priority=t,this.duedate=s}getName(){return this.name}getPriority(){return this.priority}setName(e){this.name=e}getDueDate(){return this.duedate}}const a=class{static saveTodoList(e){localStorage.setItem("todoList",JSON.stringify(e))}static getTodoList(){const a=Object.assign(new t,JSON.parse(localStorage.getItem("todoList")));return a.setProjects(a.getProjects().map((t=>Object.assign(new e,t)))),a.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(new s,e)))))),a}static addProject(e){const t=this.getTodoList();t.addProject(e),this.saveTodoList(t)}static deleteProject(e){const t=this.getTodoList();t.deleteProject(e),this.saveTodoList(t)}static addTask(e,t){const s=this.getTodoList();s.getProject(e).addTask(t),this.saveTodoList(s)}static deleteTask(e,t){const s=this.getTodoList();s.getProject(e).deleteTask(t),this.saveTodoList(s)}};document.addEventListener("DOMContentLoaded",class{static loadContent(){document.querySelector("#content").innerHTML="",this.loadHeader(),this.loadHome(),this.loadFooter()}static loadHeader(){const e=document.querySelector("#content"),t=document.createElement("header"),s=document.createElement("img");s.src="https://img.icons8.com/arcade/64/000000/todo-list.png";const a=document.createElement("p");a.textContent="Todoism",t.append(s,a),e.append(t)}static loadFooter(){const e=document.querySelector("#content"),t=document.createElement("footer");t.textContent="CopyrightsÂ© JanusZhu |";const s=document.createElement("a");s.href="#",s.textContent="Source Code",t.appendChild(s),e.append(t)}static loadHome(){const e=document.querySelector("#content"),t=document.createElement("div");t.classList.add("home"),e.append(t),this.loadSideBar(),this.loadProjectPreview()}static loadSideBar(){const e=document.querySelector(".home"),t=document.createElement("div");t.classList.add("sideBar"),e.append(t),this.loadProjects()}static loadProjects(){const e=document.querySelector(".sideBar");e.innerHTML="";const t=document.createElement("div"),s=a.getTodoList();console.log(s.getProjects().length);for(let e=0;e<s.getProjects().length;e++){const a=s.getProjects()[e].getName();if(console.log(a),"Today"!=a&&"Inbox"!=a&&"This week"!=a){const e=document.createElement("div");e.classList.add("project"),e.addEventListener("click",(()=>{this.loadProjectDetails(a)}));const s=document.createElement("img");s.src="https://img.icons8.com/cotton/64/000000/bulleted-list.png";const o=document.createElement("p");o.textContent=a;const c=document.createElement("img");c.classList.add("delete"),c.src="https://img.icons8.com/sf-ultralight/25/000000/delete-forever.png",c.addEventListener("click",(()=>{this.handleDelete(a)})),e.append(s,o,c),t.append(e)}}e.append(t,this.loadAddSection())}static loadAddSection(){const e=document.createElement("div");e.classList.add("add-project");const t=document.createElement("img");t.src="https://img.icons8.com/ios-glyphs/30/000000/plus-math.png";const s=document.createElement("p");return s.textContent="Add A New Project",e.append(t,s),e.addEventListener("click",(()=>{this.loadProjectBtn(e)})),e}static loadProjectDetails(e){document.querySelector(".preview").innerHTML=`<div class = "project-title">${e}</div>`,this.loadTasks(e),this.loadAddTask(),this.loadCompleteBtn(),this.loadDeleteBtn()}static loadDeleteBtn(){Array.from(document.querySelectorAll(".task-complete")).forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-for-task");document.querySelector(`[data-info-task = ${t}]`).classList.toggle("completed")}))}))}static loadCompleteBtn(){Array.from(document.querySelectorAll(".task-delete")).forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-for-task"),s=document.querySelector(".project-title").textContent;a.deleteTask(s,t),this.loadProjectDetails(s),console.log("yes")}))}))}static loadTasks(e){const t=document.createElement("div");t.classList.add("task-section"),document.querySelector(".preview").append(t),a.getTodoList().getProject(e).getTasks().forEach((e=>this.loadTask(e)))}static loadTask(e){document.querySelector(".task-section").innerHTML+=`<div class="task-detail"><img src = "https://img.icons8.com/ios/50/000000/task-completed.png" class= "task-complete" data-for-task = "${e.getName()}"><div class="task-name" data-info-task = "${e.getName()}">${e.getName()}</div> <div class="task-dueDate">${e.getDueDate()}</div><img src="https://img.icons8.com/ios-glyphs/30/000000/multiply.png"/ class="task-delete" data-for-task = "${e.getName()}"></div>`}static loadAddTask(){const e=document.createElement("div");e.classList.add("add-task");const t=document.createElement("img");t.src="https://img.icons8.com/ios-glyphs/30/000000/plus-math.png";const s=document.createElement("p");s.textContent="Add A New Task",e.append(t,s),e.addEventListener("click",(()=>{this.loadAddTaskBtn(e)})),document.querySelector(".preview").append(e)}static loadAddTaskBtn(e){e.classList.add("hidden");const t=document.createElement("div");t.classList.add("new-task");const s=document.createElement("input");s.id="task-name",s.type="text",s.placeholder="Name",s.maxLength=8;const a=document.createElement("button");a.classList.add("add"),a.textContent="Add",a.addEventListener("click",(()=>{this.handleAddTask()}));const o=document.createElement("button");o.classList.add("cancel"),o.textContent="Cancel",o.addEventListener("click",(()=>{this.handleCancelTask()})),t.append(s,a,o),document.querySelector(".preview").appendChild(t)}static handleAddTask(){const e=document.querySelector("#task-name"),t=document.querySelector(".project-title").textContent;""===e.value?alert("Please add a name"):(a.addTask(t,new s(e.value)),this.handleCancelTask(),this.loadProjectDetails(t))}static handleCancelTask(){document.querySelector(".new-task").remove(),document.querySelector(".hidden")&&document.querySelector(".hidden").classList.remove("hidden")}static loadProjectBtn(e){e.classList.add("hidden");const t=document.createElement("div");t.classList.add("new-project");const s=document.createElement("input");s.id="project-name",s.type="text",s.placeholder="Name",s.maxLength=8;const a=document.createElement("button");a.classList.add("add"),a.textContent="Add",a.addEventListener("click",(()=>{this.handleAdd()}));const o=document.createElement("button");o.classList.add("cancel"),o.textContent="Cancel",o.addEventListener("click",(()=>{this.handleCancel()})),t.append(s,a,o),document.querySelector(".sideBar").appendChild(t)}static handleAdd(){const t=document.querySelector("input");""===t.value?alert("Please add a name"):(a.addProject(new e(t.value)),this.handleCancel(),this.loadProjects())}static handleDelete(e){console.log(e),a.deleteProject(e),this.loadContent()}static handleCancel(){document.querySelector(".new-project").remove(),document.querySelector(".hidden")&&document.querySelector(".hidden").classList.remove("hidden")}static loadProjectPreview(){const e=document.querySelector(".home"),t=document.createElement("div");t.classList.add("preview"),e.append(t)}}.loadContent())})();